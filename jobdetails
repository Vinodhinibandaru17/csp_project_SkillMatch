import React, { useState } from "react";
import { useNavigate, useLocation } from "react-router-dom";
import { createPageUrl } from "@/utils";
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { Textarea } from "@/components/ui/textarea";
import { Label } from "@/components/ui/label";
import { Badge } from "@/components/ui/badge";
import { 
  MapPin, 
  Briefcase, 
  DollarSign, 
  Calendar,
  Building2,
  GraduationCap,
  ArrowLeft,
  Loader2
} from "lucide-react";
import { format } from "date-fns";
import { toast } from "sonner";

export default function JobDetails() {
  const navigate = useNavigate();
  const location = useLocation();
  const queryClient = useQueryClient();
  const [showApplicationForm, setShowApplicationForm] = useState(false);
  const [coverLetter, setCoverLetter] = useState("");

  const params = new URLSearchParams(location.search);
  const jobId = params.get('id');
